<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>雨伞的个人博客 • Posts by &#34;aaa&#34; tag</title>
        <link>http://example.com</link>
        <description></description>
        <language>zh-CN</language>
        <pubDate>Wed, 08 Nov 2023 19:50:03 +0800</pubDate>
        <lastBuildDate>Wed, 08 Nov 2023 19:50:03 +0800</lastBuildDate>
        <category>月度总结</category>
        <category>假期总结 学期规划 月度总结</category>
        <category>计划</category>
        <category>算法设计作业</category>
        <category>aaa</category>
        <item>
            <guid isPermalink="true">http://example.com/eca31b5db33e/</guid>
            <title>scrapy</title>
            <link>http://example.com/eca31b5db33e/</link>
            <category>aaa</category>
            <pubDate>Wed, 08 Nov 2023 19:50:03 +0800</pubDate>
            <description><![CDATA[ &lt;figure class=&#34;highlight clean&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs clean&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; datetime&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; json&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;from&lt;/span&gt; pprint &lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; pprint&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; requests&lt;br&gt;&lt;br&gt;headers = &amp;#123;  # 请求头。&lt;br&gt;    # 假装请求是浏览器发出的（在这里实际上是网络爬虫发出的）。&lt;br&gt;    # 有些网站会通过检测请求头的User-Agent字段判断请求是&lt;br&gt;    # 浏览器发出的还是爬虫发出的。如果检测出是爬虫发出的，&lt;br&gt;    # 则拒绝相应。&lt;br&gt;    &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;User-Agent&amp;#x27;&lt;/span&gt;: &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36&amp;#x27;&lt;/span&gt;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;br&gt;invalid_chars_for_windows_filenames = [&lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;/&amp;#x27;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;\\&amp;#x27;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;:&amp;#x27;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;*&amp;#x27;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;?&amp;#x27;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;&amp;quot;&amp;#x27;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;&amp;lt;&amp;#x27;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;&amp;gt;&amp;#x27;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;|&amp;#x27;&lt;/span&gt;]&lt;br&gt;&lt;br&gt;&lt;br&gt;def fix_filename(filename):&lt;br&gt;    for char &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt; invalid_chars_for_windows_filenames:&lt;br&gt;        filename = filename.replace(char, &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)&lt;br&gt;    return filename&lt;br&gt;&lt;br&gt;&lt;br&gt;def main():&lt;br&gt;    rcmd_api = &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;https://api.bilibili.com/x/web-interface/wbi/index/top/feed/rcmd&amp;quot;&lt;/span&gt;&lt;br&gt;    # rcmd_api = &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;https://api.bilibili.com/x/web-interface/wbi/index/top/feed/rcmd?ps=30&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;    # 通过api请求json数据。&lt;br&gt;    r = requests.get(&lt;br&gt;        url=rcmd_api,&lt;br&gt;        headers=headers,&lt;br&gt;    )&lt;br&gt;    json_str = r.text  # Not html.&lt;br&gt;&lt;br&gt;    # 将请求得到的json字符串转换成Python字典。&lt;br&gt;    d = json.loads(json_str)&lt;br&gt;    pprint(d)&lt;br&gt;&lt;br&gt;    items = d[&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;data&amp;quot;&lt;/span&gt;][&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;item&amp;quot;&lt;/span&gt;]&lt;br&gt;&lt;br&gt;    rcmd_videos = []&lt;br&gt;    for item &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt; items:&lt;br&gt;        # 获取封面图。&lt;br&gt;        pic = item[&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;pic&amp;quot;&lt;/span&gt;]&lt;br&gt;&lt;br&gt;        # 获取标题。&lt;br&gt;        title = item[&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;]&lt;br&gt;&lt;br&gt;        # 获取发布日期。&lt;br&gt;        pubdate = item[&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;pubdate&amp;quot;&lt;/span&gt;]&lt;br&gt;        pubdate = datetime.datetime.fromtimestamp(pubdate)&lt;br&gt;&lt;br&gt;        # 获取up主。&lt;br&gt;        owner_name = item[&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;owner&amp;quot;&lt;/span&gt;][&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;]&lt;br&gt;&lt;br&gt;        rcmd_videos.append(&amp;#123;&lt;br&gt;            &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;pic&amp;quot;&lt;/span&gt;: pic,&lt;br&gt;            &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;: title,&lt;br&gt;            &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;pubdate&amp;quot;&lt;/span&gt;: pubdate,&lt;br&gt;            &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;owner_name&amp;quot;&lt;/span&gt;: owner_name,&lt;br&gt;        &amp;#125;)&lt;br&gt;&lt;br&gt;        # Save the image.&lt;br&gt;        # r = requests.get(&lt;br&gt;        #     url=pic,&lt;br&gt;        #     headers=headers&lt;br&gt;        # )&lt;br&gt;        # image = r.content  # Not .text.&lt;br&gt;        # &lt;span class=&#34;hljs-keyword&#34;&gt;with&lt;/span&gt; open(f&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&amp;#123;fix_filename(title)&amp;#125;.jpg&amp;quot;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;wb&amp;quot;&lt;/span&gt;) &lt;span class=&#34;hljs-keyword&#34;&gt;as&lt;/span&gt; f:&lt;br&gt;        #     f.write(image)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;if&lt;/span&gt; __name__ == &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;__main__&amp;#x27;&lt;/span&gt;:&lt;br&gt;    main()&lt;br&gt;    &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs python&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;from&lt;/span&gt; pprint &lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; pprint&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; requests&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;from&lt;/span&gt; bs4 &lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; BeautifulSoup&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;hljs-title function_&#34;&gt;obtain_channel_info&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;soup&lt;/span&gt;):&lt;br&gt;    channels = []  &lt;span class=&#34;hljs-comment&#34;&gt;# 存储各分区信息的列表。&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# 获取包含各分区a标签的div标签。&lt;/span&gt;&lt;br&gt;    channel_div = soup.find(&lt;br&gt;        name=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;div&amp;quot;&lt;/span&gt;,&lt;br&gt;        class_=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;channel-items__left&amp;quot;&lt;/span&gt;,&lt;br&gt;    )&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# print(channel_div.prettify())&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# 获取各个a标签。&lt;/span&gt;&lt;br&gt;    channel_as = channel_div.find_all(&lt;br&gt;        name=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;a&amp;quot;&lt;/span&gt;,&lt;br&gt;    )&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# 从各个a标签获取分区名和分区链接。&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-keyword&#34;&gt;for&lt;/span&gt; channel_a &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt; channel_as:&lt;br&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;# 获取分区名。&lt;/span&gt;&lt;br&gt;        channel_name = channel_a.text&lt;br&gt;&lt;br&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;# 获取分区链接。&lt;/span&gt;&lt;br&gt;        channel_href = channel_a[&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;href&amp;quot;&lt;/span&gt;]&lt;br&gt;        channel_href = &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;https:&amp;quot;&lt;/span&gt; + channel_href&lt;br&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;# channel_href = f&amp;quot;https:&amp;#123;channel_href&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;# 将分区名和分区链接装进字典，将该字典加入channels列表。&lt;/span&gt;&lt;br&gt;        channels.append(&amp;#123;&lt;br&gt;            &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;: channel_name,&lt;br&gt;            &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;href&amp;quot;&lt;/span&gt;: channel_href,&lt;br&gt;        &amp;#125;)&lt;br&gt;&lt;br&gt;    pprint(channels)&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# 保存分区信息。&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-keyword&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;hljs-built_in&#34;&gt;open&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;channels.txt&amp;quot;&lt;/span&gt;, &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;w&amp;quot;&lt;/span&gt;, encoding=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;) &lt;span class=&#34;hljs-keyword&#34;&gt;as&lt;/span&gt; f:&lt;br&gt;        f.write(&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;name,href\n&amp;quot;&lt;/span&gt;)&lt;br&gt;        &lt;span class=&#34;hljs-keyword&#34;&gt;for&lt;/span&gt; channel &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt; channels:&lt;br&gt;            f.write(&lt;span class=&#34;hljs-string&#34;&gt;f&amp;quot;&lt;span class=&#34;hljs-subst&#34;&gt;&amp;#123;channel[&lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;name&amp;#x27;&lt;/span&gt;]&amp;#125;&lt;/span&gt;,&lt;span class=&#34;hljs-subst&#34;&gt;&amp;#123;channel[&lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;href&amp;#x27;&lt;/span&gt;]&amp;#125;&lt;/span&gt;\n&amp;quot;&lt;/span&gt;)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;hljs-title function_&#34;&gt;main&lt;/span&gt;():&lt;br&gt;    url = &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;https://www.bilibili.com/&amp;quot;&lt;/span&gt;  &lt;span class=&#34;hljs-comment&#34;&gt;# B站URL。&lt;/span&gt;&lt;br&gt;    headers = &amp;#123;  &lt;span class=&#34;hljs-comment&#34;&gt;# 请求头。&lt;/span&gt;&lt;br&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;# 假装请求是浏览器发出的（在这里实际上是网络爬虫发出的）。&lt;/span&gt;&lt;br&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;# 有些网站会通过检测请求头的User-Agent字段判断请求是&lt;/span&gt;&lt;br&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;# 浏览器发出的还是爬虫发出的。如果检测出是爬虫发出的，&lt;/span&gt;&lt;br&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;# 则拒绝相应。&lt;/span&gt;&lt;br&gt;        &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;User-Agent&amp;#x27;&lt;/span&gt;: &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36&amp;#x27;&lt;/span&gt;&lt;br&gt;    &amp;#125;&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# 第一步：获取html。&lt;/span&gt;&lt;br&gt;    r = requests.get(  &lt;span class=&#34;hljs-comment&#34;&gt;# 向B站发出请求，并获取B站的相应。&lt;/span&gt;&lt;br&gt;        url=url,  &lt;span class=&#34;hljs-comment&#34;&gt;# 指定URL。&lt;/span&gt;&lt;br&gt;        headers=headers,  &lt;span class=&#34;hljs-comment&#34;&gt;# 指定请求头。&lt;/span&gt;&lt;br&gt;    )&lt;br&gt;    html = r.text  &lt;span class=&#34;hljs-comment&#34;&gt;# 从B站响应（变量r）中获取html。&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# 第二步：解析html。&lt;/span&gt;&lt;br&gt;    soup = BeautifulSoup(&lt;br&gt;        markup=html,  &lt;span class=&#34;hljs-comment&#34;&gt;# 指定html。&lt;/span&gt;&lt;br&gt;        features=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;html.parser&amp;quot;&lt;/span&gt;,  &lt;span class=&#34;hljs-comment&#34;&gt;# 指定解析器。&lt;/span&gt;&lt;br&gt;    )&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# 第三步：获取分区信息（分区名和分区链接）。&lt;/span&gt;&lt;br&gt;    obtain_channel_info(soup=soup)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;if&lt;/span&gt; __name__ == &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;__main__&amp;#x27;&lt;/span&gt;:&lt;br&gt;    main()&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
 ]]></description>
        </item>
    </channel>
</rss>
